<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- Page title -->
    <title>Data Annotator</title>

    <!-- fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Sans 3' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Archivo' rel='stylesheet'>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Google icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">

    <!-- CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/annotation.css">
</head>
<body>
    <!-- link to javascript file -->
    <script type="module" src="scripts/script.js"></script>
    <div id="top-bar" class="container-fluid" style="position:relative;z-index:2;height:6vh;box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.163);">
        <div class="row" style="height:100%;background-color: rgb(255, 255, 255);">
            <div class="col-md-1 d-flex align-items-center justify-content-start px-4">
                <img class="logo" src="svg/logo.svg"/>
            </div>
            <div class="col-md d-flex" style="font-family:'Source Sans 3';display:flex;margin-top: auto;margin-bottom: auto;">
                <span class="user-type">Project Manager</span>
                <span style="font-size:20px;padding-left:20px;padding-right:20px">|</span> 
                <span style="font-size:20px;">Annotation</span>
            </div>
        </div>
    </div>
    <div class="container-fluid" style="height:94vh;background-image: url('images/annotation-background-gradient6.jpg');background-size:cover">
        <div class="row" style="height:100%">
            <!-- Side Navigation Bar -->
            <div class="col-md-1" style="z-index:1;box-shadow: 5px 0px 5px rgba(59, 59, 59, 0.111);background-color:rgb(255, 255, 255);">
                <nav class="side-nav">
                    <div class="nav-link">
                        <div>
                            <img style="width:28px;" src="images/button-icons/dashboard-button-unselected.png"/>
                        </div>
                        <div>
                            <a style="margin-left:5px;">Dashboard</a>
                        </div>
                    </div>
                    <div class="nav-link">
                        <div>
                            <img style="width:28px;" src="images/button-icons/projects-button-selected.png"/>
                        </div>
                        <div>
                            <a style="margin-left:5px";>Projects</a>
                        </div>
                    </div>
                    <div class="nav-link">
                        <div>
                            <img style="width:28px;" src="images/button-icons/annotators-button-unselected.png"/>
                        </div>
                        <div>
                            <a style="margin-left:5px;">Annotators</a>
                        </div>
                    </div>
                </nav>
            </div>
            <!-- Annotation Interface Body -->
            <div class="col-md-8">
                <div class="row align-items-center" style="padding-left:1em;border-bottom:solid 2px #ecebeb;height:50px;background-color:rgb(255, 255, 255);box-shadow: 0px 0px 25px rgba(170, 187, 170, 0.25);">
                    <!-- Toolbar -->
                    <div class="col-5">
                        <div style="width:26px;display:inline;">
                            <img src="svg/classify_button_unselected.svg" id="classifyToolButton" style="width:26px;"/>
                            <div class="toolbar-tip" id="classifyTip">Classify</div>
                        </div>
                        <div style="width:26px;display:inline;">
                            <img src="svg/erase_button_unselected.svg" id="eraseToolButton" style="width:26px"/>
                            <div class="toolbar-tip" id="eraseTip">Erase</div>
                        </div>
                        <div style="width:26px;display:inline;">
                            <img src="svg/export_json_button.svg" id="exportJsonButton" style="width:26px" data-toggle="modal" data-target="#jsonModal"/>
                            <div class="toolbar-tip" id="jsonTip">Export</div>
                        </div>
                        <div style="width:26px;display:inline;">
                            <img src="svg/instructions-button.svg" id="instructionsButton" style="width:26px" data-toggle="modal" data-target="#instructionsModal"/>
                            <div class="toolbar-tip" id="instructionsTip">Instructions</div>

                        </div>
                        <div style="width:26px;display:inline;">
                            <img src="svg/save-button.svg" id="saveChangesButton" style="width:26px"/>
                            <div class="toolbar-tip" id="saveChangesTip">Save changes</div>

                        </div>
                    </div>
                    <!-- Back button & project name | file name -->
                    <div class="col-md-5">
                        <img src="svg/back_arrow.svg" class="back-arrow" onclick="window.location = 'dashboard-temp.html'">
                        <span id="projectNameSpan" style="color:#453737;font-size:18px;font-family:'Archivo'">Project Name</span>
                        <span style="color:#cbc4c4;font-size:22px;padding-left:10px;padding-right:10px">|</span> 
                        <span id="dataFileNameSpan" style="color:#4e6fa2;font-size:18px;font-family:'Archivo';">Data File Name</span>
                    </div>
                    <div class="col-md-2 d-flex justify-content-end">
                        <div>
                            <img id="increaseFont" class="font-size-button" src="svg/zoom-in-button.svg">
                            <div id="increaseFontTip" class="toolbar-tip">+ Size</div>
                        </div>
                        <div>
                            <img id="decreaseFont" class="font-size-button" src="svg/zoom-out-button.svg">
                            <div id="decreaseFontTip" class="toolbar-tip">- Size</div>
                        </div>
                    </div>
                    
                </div>
                <div class="px-4 row">
                    <div id="textDiv" style="margin-top:20px;min-height:50vh;max-height:88vh;overflow:auto;padding-right:60px">
                        <div style="position:relative" id="textArea">
                            <!-- filled with text in script.js -->
                        </div>
                        <!-- dropdown menu of classes -->
                        <div id="dropdown" class="dropdown" style="display:none;">
                            <div id="dropdown-content" class="dropdown-content">
                                <div id="dropdown-links">
                                    <a data-toggle="modal" id="dropdownAddNewClassButton" data-target="#exampleModal">
                                        <i class="material-icons" style="font-size:11px;color:rgb(43, 38, 38)">add</i>
                                        Add new class
                                    </a>
                                </div>
                                <div style="border-top:solid 1px #DBDBDB;margin-top:12px;">
                                    <a style="margin-top:2px;color:#6B6B6B">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- notification -->
                    <div id="notification" class="notification">
                        <div id="close-notification-button" class="close-button">
                            <img src="svg/close-button-light.svg">
                        </div>
                        <div id="notification-text" class="notification-text">
                            This is a small notification
                        </div>
                    </div>
                </div>
            </div>
            <!-- Annotation Interface Sidebar -->
            <div class="col-md-3" style="box-shadow: -5px 0px 5px rgba(59, 59, 59, 0.111);background-color: rgb(255, 255, 255);">
                <h2 style="margin-top:18px;">Classification</h2>
                <!-- TEXT FILE -->
                <!-- <div class="text-bg-dark p-2">Text File</div> -->
                <!-- <label class="custom-file-upload"> -->
                    <!-- <input type="file" id="fileinput"> -->
                    <!-- Upload File -->
                    <!-- <i class="fa fa-cloud-upload"></i> Custom Upload -->
                <!-- </label> -->
                <!-- List of all classes to use for classification -->
                <div class="text-bg-dark p-2">Available Classes</div>
                <div id="" style="margin-top:7px">
                    <ul id="allClasses" style="list-style-type:none;margin-left:-26px">
                    </ul>
                    <!-- <input type="radio" name="class" value="Name" id="name"/>
                    <label for="name">NAME</label>
                    <i class="material-icons" style="font-size:12px;color: rgb(255, 45, 177)">square</i> -->
                    <!-- <br/> -->
                </div>
                <!-- OLD add class button and text input -->
                <!-- <input type="text" id="newClass" placeholder="Class name"> -->
                <!-- <button type="button" id="addClassButton" onclick="addClass(newClass.value)">Add class</button> -->
                
                <!-- AVAILABLE CLASSES -->
                <!-- Add new class button to trigger modal -->
                <div style="margin-top:4px;margin-bottom:4px">
                    <button type="button" id="addClassButton" class="btn btn-dark" style="margin-left:5px;margin-top:5px; margin-bottom: 5px;" data-toggle="modal" data-target="#exampleModal">
                        Add class
                    </button>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" style="width:50%;max-width:400px" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Create a new class</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                </div>
                                <div class="modal-body">
                                    <h6>Class name</h6>
                                    <input type="text" id="newClass" oninput="this.value = this.value.toUpperCase()" style="margin-bottom: 10px;" placeholder="E.g. GENDER">
                                    <h6>Class colour</h6>
                                    <input type="color" id="classColour" style="margin-bottom:10px;" name="classColour" value="#ffffff">
                                    <h6>Preview</h6>
                                    <div style="text-align:center;padding:2px;padding-top:8px;padding-bottom:8px;border-style:solid;border-width:1px;border-radius: 2px;border-color: rgb(116, 116, 116);">
                                        This is how your <span id="classTest">classification</span> will look.
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" id="createClassButton" class="btn btn-primary">Create class</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Classify button -->
                    <!-- <button type="button" style="margin-top:5px; margin-bottom: 5px;" id="classifyButton" class="btn btn-dark" onclick="newClassify()">Classify</button> -->
                    <!-- View Active Classes button -->
                    <button type="button" style="margin-top:5px; margin-bottom: 5px;"class="btn btn-secondary" id="viewActiveClassesButton">View active classes</button>
                </div>
                <!-- CLASSIFICATIONS -->
                <div class="text-bg-dark p-2">Classifications</div>
                <!-- List of all classifications -->
                <ol style="padding-top:6px; margin-left:-10px; margin-bottom:6px;max-height:150px;overflow:auto" id="classifications-list">
                    <li>No classifications yet!</li>
                </ol>

                <!-- OLD JSON PREVIEW -->
                <!-- <div class="text-bg-dark p-2">
                    JSON Preview
                </div>
                <div style="margin:5px;border-style: solid;border-width:2px; border-color: rgba(29, 87, 106, 0.276); border-radius: 7px;">
                    <p id="jsonPreview" style="padding-top:5px;padding-left:5px;padding-right:5px;color:rgba(0, 0, 0, 0.423)">Upload a text file and start annotating to see the preview.</p>
                </div> -->

                <!-- NEW JSON PREVIEW -->
                <div class="text-bg-dark p-2">
                    Live JSON Preview
                </div>
                <div style="padding:10px;margin:5px;margin-top:8px;margin-bottom:8px;border-style: solid;border-width:2px; border-color: rgba(29, 87, 106, 0.276); border-radius: 7px;">
                    <!-- Annotator ID collapsible -->
                    <button data-toggle="collapse" class="collapsible-button" data-target="#annotatorIDCollapse">Annotator ID</button>
                    <div id="annotatorIDCollapse" class="collapse">Upload a text file to see the preview. The file will use your annotator ID.</div>
                    <br>
                    <!-- Text Content collapsible -->
                    <button data-toggle="collapse" class="collapsible-button" data-target="#textCollapse">Text</button>
                    <div id="textCollapse" class="collapse">Upload a text file to see the preview.</div>
                    <br>
                    <!-- Classifications collapsible -->
                    <button data-toggle="collapse" class="collapsible-button" data-target="#classificationsCollapse">Classifications</button>
                    <div id="classificationsCollapse" class="collapse">Upload a text file and start annotating to see the preview.</div>
                    <br>
                </div>

                <div class="text-bg-dark p-2">
                    Final Step
                </div>
                <div style="display:flex;justify-content: center;margin-top:8px;">
                    <div id="markDoneButton" style="transition-duration:2s;display:flex;justify-content:center;align-items:center;background-color:#939393;color:white;width:60%;height:70px;border-radius: 14px;border:none;font-family:'Source Sans 3';font-size:18px;">
                        Mark as done
                        <img id="doneCircle" style="margin-left:12px" src="svg/circle.svg">
                    </div>
                </div>

                <!-- JSON Modal -->
                <div class="modal fade" id="jsonModal" tabindex="-1" role="dialog" aria-labelledby="jsonModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog" style="width:50%;max-width:600px" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Export to JSON</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <h6>JSON Preview</h6>
                                <div id='jsonPreviewBody' style="background-image:url('images/json-background.png');color:white;text-align:start;padding-left:8px;padding-top:8px;padding-bottom:8px;border-style:solid;max-height:500px;overflow:auto;border-width:1px;border-radius: 4px;min-height:60px;border-color: rgb(116, 116, 116);resize:vertical">
                                    <p id="jsonPreviewText" style="white-space:pre-wrap;">Upload a file and start annotating to see a preview</p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="button" id="exportToJSONButton"
                                    class="btn btn-primary">Export</button>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Instructions Modal -->
            <div class="modal fade" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="instructionsModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" style="width:50%;max-width:600px" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Project Instructions</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h6>Your project manager has provided the following instructions:</h6>
                        <p id="instructionsParagraph">Loading...</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>


            </div>
        </div>
    </div>
</div>
<!-- Optional JavaScript (for Modal) -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>